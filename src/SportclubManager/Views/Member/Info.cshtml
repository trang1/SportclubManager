
@{
    ViewBag.Title = "Info";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@model SportclubManager.Models.Member

<div class="container" align="center">
    <h2>Member information</h2>
    @{
        AjaxOptions options = new AjaxOptions();
        options.HttpMethod = "GET";
        options.UpdateTargetId = "cont";
        options.InsertionMode = InsertionMode.Replace;
        options.OnComplete = "alert('complete')";
        options.OnSuccess = "alert('success')";
    }
    @using (Ajax.BeginForm("Save", "Member", FormMethod.Post, options, new { @class = "form-login", enctype = "multipart/form-data" }))
    {
        <div class="container" align="left">
            <div hidden>
                @Html.TextBox("MemberID", Model?.MemberID, new { @class = "form-control" })
            </div>
            <span>First Name</span>
            @Html.TextBox("FirstName", Model?.FirstName, new { @class = "form-control" })
            @Html.ValidationMessage("FirstName")
            <p></p>

            <span>Last Name</span>
            @Html.TextBox("LastName", Model?.LastName, new { @class = "form-control" })
            @Html.ValidationMessage("LastName")
            <p></p>

            @*<span>Document Location</span>
                @Html.TextBox("DocumentLocation", Model?.DocumentLocation, new {@class = "form-control", disabled = "true"})
                @Html.ValidationMessage("DocumentLocation")*@

            @if (string.IsNullOrEmpty(Model?.PhotoLocation))
            {
                <p></p>
                <input type="file" name="file" class="form-control" />
                <p></p>
            }
            else
            {
                <div class="row" id="cont">
                    <div class="col-md-5">
                        @*<button class="btn btn-block" onclick='openFile("@Model.PhotoLocation")'>
                            Open file
                        </button>*@
                        @Ajax.ActionLink("Open photo", "OpenPhoto", new { location = Model.PhotoLocation }, options)
                    </div>
                    <div class="col-md-2"></div>
                    <div class="col-md-5">
                        @*<button class="btn btn-block" onclick='sendRequestToRemove("@Model.PhotoLocation")'>
                            Delete file
                        </button>*@
                        @Ajax.ActionLink("Delete photo", "DeletePhoto", new { location = Model.PhotoLocation }, options)
                    </div>
                </div>
            }

            <div class="row">
                <div class="col-md-5">
                    <button type="submit" class="btn btn-success">
                        Save changes
                    </button>
                </div>
                <div class="col-md-2"></div>
                <div class="col-md-5">
                    <button class="btn btn-danger" onclick='window.history.back();'>
                        Cancel editing
                    </button>
                </div>
            </div>

        </div>
    }
</div>

